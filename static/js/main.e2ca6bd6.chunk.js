(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,n){e.exports=n(420)},216:function(e,t,n){},218:function(e,t,n){},415:function(e,t,n){},420:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),l=n.n(o),i=n(21),u=n(22),c=n(30),s=n(29),m=n(31),d=(n(216),n(218),n(23)),v=n(203),h=n.n(v),p=n(204),b=n(17),E=n(426),f=n(427),y=n(424),O=function(e,t){var n="admin@admin"===e&&"123"===t;return new Promise(function(e,t){return setTimeout(n?e(!0):t(!1),500)})},g=function(){return new Promise(function(e){return setTimeout(e(!0),500)})},S=function(e,t){return function(e,t){return function(n){return O(e,t).then(function(){return n({type:"AUTHENTICATE",payload:{username:e,password:t}})}).catch(function(){return n({type:"AUTH_ERROR"})})}}(e,t)},A=function(){return function(e){return g().then(function(){return e({type:"SIGNOUT"})}).catch()}},L=n(422),j=n(32),T={loginContainer:{minWidth:320,maxWidth:400,height:"auto",position:"absolute",top:"20%",left:0,right:0,margin:"auto"},paper:{padding:20,overflow:"auto"},buttonsDiv:{textAlign:"center",padding:10},flatButton:{color:j.grey500},checkRemember:{style:{float:"left",maxWidth:180,paddingTop:5},labelStyle:{color:j.grey500},iconStyle:{color:j.grey500,borderColor:j.grey500,fill:j.grey500}},loginBtn:{float:"right"},btn:{background:"#4f81e9",color:j.white,padding:7,borderRadius:2,margin:2,fontSize:13},btnFacebook:{background:"#4f81e9"},btnGoogle:{background:"#e14441"},btnSpan:{marginLeft:5}},x=n(16),k=n.n(x),C=n(78),R=n.n(C),w=n(53),D=n.n(w),U=n(35),I=n.n(U),_=n(205),P=Object(d.b)(function(e){return{authError:e.auth.authError}},function(e){return{handleSubmit:function(t,n){t.preventDefault(),e(S(t.target.email.value,t.target.senha.value)).then(function(){return n.push("/livros")})}}})(Object(L.a)(function(e){return r.a.createElement("div",null,r.a.createElement(_.a,null,r.a.createElement("div",{style:T.loginContainer},r.a.createElement(k.a,{style:T.paper},r.a.createElement("span",{id:"messages"},e.authError),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t,e.history)}},r.a.createElement(I.a,{hintText:"Email",floatingLabelText:"Email",fullWidth:!0,name:"email",type:"email",id:"loginEmail"}),r.a.createElement(I.a,{type:"password",hintText:"Senha",floatingLabelText:"Senha",fullWidth:!0,name:"senha",id:"loginSenha"}),r.a.createElement("div",null,r.a.createElement(D.a,{label:"Lembrar me",style:T.checkRemember.style,labelStyle:T.checkRemember.labelStyle,iconStyle:T.checkRemember.iconStyle}),r.a.createElement(R.a,{label:"Efetue Login",primary:!0,type:"submit",style:T.loginBtn})))))))})),F=function(){return r.a.createElement(P,null)},V=n(207),N=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Vendas"),r.a.createElement(V.a,{width:"1200px",height:"500px",chartType:"Bar",loader:r.a.createElement("div",null,"Loading Chart"),data:[["Livros","Vendas Janeiro","Vendas Fevereiro"],["MEAN",1128,167],["Arquitetura Java",2133,2236],["ReactJS",3133,3201],["TDD",4220,4221],["SOA",5210,596],["PrimeFaces",6393,6118],["JSF2",729,7154],["JPA",8449,8241]],rootProps:{"data-testid":"2"}}))},G=function(){return r.a.createElement(N,null)},W={autores:[{nome:"fulano",email:"fulano@fulano.com"},{nome:"ciclano",email:"ciclano@ciclano.com"}]},B=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"getAutoresList",value:function(){return new Promise(function(e){setTimeout(e(W.autores),500)})}},{key:"saveAutor",value:function(e){return new Promise(function(t){W.autores.push(e),setTimeout(t({status:201}),500)})}},{key:"removeAutor",value:function(e){return new Promise(function(t){var n=W.autores.indexOf(e);W.autores.splice(n,1),setTimeout(t({status:200}),500)})}}]),e}(),M=function(){var e=new B;return function(t){return e.getAutoresList().then(function(e){return t({type:"GET_AUTORES",payload:e})}).catch()}},J=function(e){var t=new B;return function(n){return t.saveAutor(e).then(function(){return n({type:"ADD_AUTOR",payload:e})})}},H=function(e){var t=new B;return function(n){return t.removeAutor(e).then(function(){return n({type:"REMOVE_AUTOR",payload:e})})}},z=function(e,t){var n=new B;return function(a){return n.saveAutor(e).then(function(){return a({type:"UPDATE_AUTOR",payload:{autor:e,index:t}})})}},Z=function(e){return{type:"SELECT_AUTOR",payload:{index:e}}},$=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getAutoresList()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("caption",null,"Autores"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,this.props.autores.map(function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t.nome),r.a.createElement("td",null,t.email),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.props.selectAutor(n)}},"alterar")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.props.removeAutor(t)}},"remover")))}))))}}]),t}(a.Component),q=Object(d.b)(function(e){return{autores:e.autor.autores}},function(e){return Object(b.b)({getAutoresList:M,removeAutor:H,selectAutor:Z},e)})($),K=n(54),Q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={nome:"",email:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){null!==e.autor.indexSelected&&this.props.autor.indexSelected!==e.autor.indexSelected&&this.setState({nome:e.autor.autores[e.autor.indexSelected].nome,email:e.autor.autores[e.autor.indexSelected].email})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmitForm.bind(this)},r.a.createElement("label",{htmlFor:"autorNome"},"Nome: "),r.a.createElement("input",{id:"autorNome",value:this.state.nome,onChange:function(t){return e.inputChange(t)},name:"nome"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"autorEmail"},"Email: "),r.a.createElement("input",{id:"autorEmail",value:this.state.email,onChange:function(t){return e.inputChange(t)},name:"email"}),r.a.createElement("br",null),r.a.createElement("button",{id:"btnGravarAutor",type:"submit",disabled:!this.validateForm()},"Gravar Autor")))}},{key:"handleSubmitForm",value:function(e){var t=this;e.preventDefault(),this.saveOrUpdate().then(function(){t.setState({nome:"",email:""})})}},{key:"saveOrUpdate",value:function(){var e={nome:this.state.nome,email:this.state.email};return null!==this.props.autor.indexSelected?this.props.updateAutor(e,this.props.autor.indexSelected):this.props.saveAutor(e)}},{key:"inputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(K.a)({},a,n))}},{key:"validateForm",value:function(){return this.state.nome.length>0&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.email).toLowerCase())}}]),t}(a.Component),X=Object(d.b)(function(e){return{autor:e.autor}},function(e){return Object(b.b)({saveAutor:J,updateAutor:z},e)})(Q),Y=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Novo Autor"),r.a.createElement(X,null),r.a.createElement("br",null),r.a.createElement(q,null))},ee=function(){return r.a.createElement(Y,null)},te={livros:[{titulo:"reactjs",isbn:"12345678",preco:20,dataLancamento:"11/05/2018",autores:[{nome:"fulano",email:"fulano@email.com"}]},{titulo:"react native",isbn:"87654321",preco:15,dataLancamento:"20/08/2018",autores:[{nome:"ciclano",email:"ciclano@email.com"}]}]},ne=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"getLivrosList",value:function(){return new Promise(function(e){setTimeout(e(te.livros),500)})}},{key:"saveLivro",value:function(e){return new Promise(function(t){te.livros.push(e),setTimeout(t({status:201}),500)})}},{key:"removeLivro",value:function(e){return new Promise(function(t){var n=te.livros.indexOf(e);te.livros.splice(n,1),setTimeout(t({status:200}),500)})}}]),e}(),ae=function(){var e=new ne;return function(t){return e.getLivrosList().then(function(e){return t({type:"GET_LIVROS",payload:e})}).catch()}},re=function(e){var t=new ne;return function(n){return t.saveLivro(e).then(function(){return n({type:"ADD_LIVRO",payload:e})})}},oe=function(e){var t=new ne;return function(n){return t.removeLivro(e).then(function(){return n({type:"REMOVE_LIVRO",payload:e})})}},le=function(e,t){var n=new ne;return function(a){return n.saveLivro(e).then(function(){return a({type:"UPDATE_LIVRO",payload:{livro:e,index:t}})})}},ie=function(e){return{type:"SELECT_LIVRO",payload:{index:e}}},ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getLivrosList()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("caption",null,"Livros"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titulo"),r.a.createElement("th",null,"ISBN"),r.a.createElement("th",null,"Pre\xe7o"),r.a.createElement("th",null,"Data Lan\xe7amento"))),r.a.createElement("tbody",null,this.props.livros.map(function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t.titulo),r.a.createElement("td",null,t.isbn),r.a.createElement("td",null,t.preco),r.a.createElement("td",null,t.dataLancamento),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.props.selectLivro(n)}},"alterar")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.props.removeLivro(t)}},"remover")))}))))}}]),t}(a.Component),ce=Object(d.b)(function(e){return{livros:e.livro.livros}},function(e){return Object(b.b)({getLivrosList:ae,removeLivro:oe,selectLivro:ie},e)})(ue),se=n(33),me=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={selectAutor:"",autoresSelected:[],titulo:"",isbn:"",preco:0,dataLancamento:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getAutoresList()}},{key:"componentWillReceiveProps",value:function(e){null!==e.livro.indexSelected&&this.props.livro.indexSelected!==e.livro.indexSelected&&this.setState({autoresSelected:e.livro.livros[e.livro.indexSelected].autores,titulo:e.livro.livros[e.livro.indexSelected].titulo,isbn:e.livro.livros[e.livro.indexSelected].isbn,preco:e.livro.livros[e.livro.indexSelected].preco,dataLancamento:e.livro.livros[e.livro.indexSelected].dataLancamento})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmitForm.bind(this)},r.a.createElement("label",{htmlFor:"livroTitulo"},"Titulo: "),r.a.createElement("input",{id:"livroTitulo",name:"titulo",value:this.state.titulo,onChange:this.inputChange.bind(this)}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"livroIsbn"},"ISBN: "),r.a.createElement("input",{id:"livroIsbn",name:"isbn",value:this.state.isbn,onChange:this.inputChange.bind(this)}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"livroPreco"},"Pre\xe7o: "),r.a.createElement("input",{id:"livroPreco",name:"preco",value:this.state.preco,onChange:this.inputChange.bind(this)}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"livroDataLancamento"},"Data de Lan\xe7amento: "),r.a.createElement("input",{id:"livroDataLancamento",name:"dataLancamento",value:this.state.dataLancamento,onChange:this.inputChange.bind(this)}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"livroAutores"},"Selecione o Autor: "),r.a.createElement("select",{id:"livroAutores",name:"selectAutor",value:this.state.selectAutor,onChange:this.handleChange.bind(this)},r.a.createElement("option",{value:""},"Selecione"),this.props.autores.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.nome)})),r.a.createElement("button",{id:"btnAddAutor",type:"button",onClick:this.addAutorToList.bind(this)},"Adicionar Autor"),r.a.createElement("br",null),r.a.createElement("label",null,"Autores: "),r.a.createElement("ul",null,this.state.autoresSelected.map(function(e,t){return r.a.createElement("li",{key:t},e.nome)})),r.a.createElement("br",null),r.a.createElement("button",{id:"btnGravar",type:"submit",disabled:!this.validateForm()},"Gravar Livro")))}},{key:"handleSubmitForm",value:function(e){var t=this;e.preventDefault(),this.saveOrUpdate().then(function(){t.setState({selectAutor:"",autoresSelected:[],titulo:"",isbn:"",preco:0,dataLancamento:""})})}},{key:"saveOrUpdate",value:function(){var e={autores:this.state.autoresSelected,titulo:this.state.titulo,isbn:this.state.isbn,preco:this.state.preco,dataLancamento:this.state.dataLancamento};return null!==this.props.livro.indexSelected?this.props.updateLivro(e,this.props.livro.indexSelected):this.props.saveLivro(e)}},{key:"validateForm",value:function(){return this.state.titulo.length>0&&this.state.autoresSelected.length>0&&""!==this.state.dataLancamento&&""!==this.state.isbn&&this.state.preco>0}},{key:"addAutorToList",value:function(){var e=Object(se.a)(this.state.autoresSelected).concat(this.props.autores[this.state.selectAutor]);this.setState({autoresSelected:e,selectAutor:""})}},{key:"handleChange",value:function(e){this.setState({selectAutor:e.target.value})}},{key:"inputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(K.a)({},a,n))}}]),t}(a.Component),de=Object(d.b)(function(e){return{livro:e.livro,autores:e.autor.autores}},function(e){return Object(b.b)({saveLivro:re,getAutoresList:M,updateLivro:le},e)})(me),ve=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Novo Livro"),r.a.createElement(de,null),r.a.createElement("br",null),r.a.createElement(ce,null))},he=function(){return r.a.createElement(ve,null)},pe=n(210),be=n(425),Ee=(n(415),n(423)),fe=Object(d.b)(function(e){return{authError:e.auth.authError}},function(e){return Object(b.b)({logout:A},e)})(function(e){return r.a.createElement("nav",{className:"menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(Ee.a,{id:"livroItem",to:"/livros"},"Livros")),r.a.createElement("li",null,r.a.createElement(Ee.a,{id:"autorItem",to:"/autores"},"Autores")),r.a.createElement("li",null,r.a.createElement(Ee.a,{id:"vendaItem",to:"/vendas"},"Vendas")),r.a.createElement("li",null,r.a.createElement(Ee.a,{id:"logoutItem",to:"/",onClick:e.logout},"Logout"))))}),ye=function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(fe,null)),r.a.createElement("div",null,e.children))},Oe=function(e){var t=e.component,n=Object(pe.a)(e,["component"]);return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return De.getState().auth.isAuthenticated?r.a.createElement(ye,null,r.a.createElement(t,e)):r.a.createElement(be.a,{to:"/"})}}))},ge=n(209),Se=n.n(ge)()({basename:"/livraria-frontend-reactjs"}),Ae=function(){return r.a.createElement(E.a,{history:Se},r.a.createElement(f.a,null,r.a.createElement(Oe,{path:"/livros",exact:!0,component:he}),r.a.createElement(Oe,{path:"/autores",exact:!0,component:ee}),r.a.createElement(Oe,{path:"/vendas",exact:!0,component:G}),r.a.createElement(y.a,{path:"*",exact:!0,component:F})))},Le=n(19),je={isAuthenticated:!1,authError:"",username:""},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATE":return Object(Le.a)({},e,{isAuthenticated:!0,username:t.payload.username});case"AUTH_ERROR":return Object(Le.a)({},e,{isAuthenticated:!1,authError:"Usuario ou Senha incorretos"});case"SIGNOUT":return je;default:return e}},xe={autores:[],indexSelected:null},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_AUTOR":return Object(Le.a)({},e,{indexSelected:t.payload.index});case"UPDATE_AUTOR":var n=[].concat(Object(se.a)(e.autores.slice(0,t.payload.index)),[Object.assign({},e.autores[t.payload.index],{nome:t.payload.autor.nome,email:t.payload.autor.email})],Object(se.a)(e.autores.slice(t.payload.index+1)));return Object(Le.a)({},e,{indexSelected:null,autores:n});case"REMOVE_AUTOR":return Object(Le.a)({},e,{autores:e.autores.filter(function(e){return e!==t.payload})});case"ADD_AUTOR":return Object(Le.a)({},e,{autores:Object(se.a)(e.autores).concat({nome:t.payload.nome,email:t.payload.email})});case"GET_AUTORES":return Object(Le.a)({},e,{autores:[].concat(t.payload)});default:return e}},Ce={livros:[],indexSelected:null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_LIVRO":return Object(Le.a)({},e,{indexSelected:t.payload.index});case"UPDATE_LIVRO":var n=[].concat(Object(se.a)(e.livros.slice(0,t.payload.index)),[Object.assign({},e.livros[t.payload.index],{titulo:t.payload.livro.titulo,isbn:t.payload.livro.isbn,preco:t.payload.livro.preco,dataLancamento:t.payload.livro.dataLancamento,autores:t.payload.livro.autores})],Object(se.a)(e.livros.slice(t.payload.index+1)));return Object(Le.a)({},e,{indexSelected:null,livros:n});case"REMOVE_LIVRO":return Object(Le.a)({},e,{livros:e.livros.filter(function(e){return e!==t.payload})});case"ADD_LIVRO":return Object(Le.a)({},e,{livros:Object(se.a)(e.livros).concat(t.payload)});case"GET_LIVROS":return Object(Le.a)({},e,{livros:[].concat(t.payload)});default:return e}},we=Object(b.c)({auth:Te,autor:ke,livro:Re}),De=Object(b.d)(we,Object(b.a)(h.a,p.a)),Ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{store:De},r.a.createElement(Ae,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[211,2,1]]]);
//# sourceMappingURL=main.e2ca6bd6.chunk.js.map